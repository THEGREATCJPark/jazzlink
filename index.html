<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jazzlink</title>
  <style>
    @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
  </style>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Pretendard', 'sans-serif'],
          },
          colors: {
            'jazz-blue': {
              '900': '#121B2D',
              '800': '#1A263A',
              '700': '#24344E',
              '600': '#364D73'
            },
            'jazz-gold': {
              '500': '#FFC700',
              '600': '#E6B300'
            },
            'jazz-gray': {
              '100': '#F0F2F5',
              '200': '#D9DEE3',
              '300': '#BCC4CC',
              '400': '#9FAAB5',
              '500': '#828C99',
              '600': '#656E7C'
            }
          }
        }
      }
    }
  </script>
<script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "firebase/app": "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js",
    "firebase/auth": "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js",
    "firebase/firestore": "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js",
    "firebase/storage": "https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js",
    "firebase/": "https://aistudiocdn.com/firebase@^12.5.0/",
    "path": "https://aistudiocdn.com/path@^0.12.7",
    "fs": "https://aistudiocdn.com/fs@^0.0.1-security",
    "firebase-admin": "https://aistudiocdn.com/firebase-admin@^13.6.0",
    "url": "https://aistudiocdn.com/url@^0.11.4"
  }
}
</script>
</head>
<body class="bg-gray-50 dark:bg-jazz-blue-900">
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
  <script>
    // PWA setup
    try {
        const manifest = {
          "name": "Jazzlink",
          "short_name": "Jazzlink",
          "description": "A non-profit PWA for the Korean jazz scene, connecting musicians and venues.",
          "start_url": "/",
          "display": "standalone",
          "background_color": "#121B2D",
          "theme_color": "#121B2D",
          "icons": [
            {
              "src": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxOTIgMTkyIiB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEyMWIyZCIgZD0iTTAgMGgxOTJ2MTkySDB6Ii8+PHBhdGggc3Ryb2tlPSIjZmZjNzAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMTIiIGQ9Im0xMzQgNjIgMTIgMTJNMTE3IDk0bDEyIDEyTTgwIDEyM2wxMiAxMiIvPjxwYXRoIHN0cm9rZT0iI2ZmYzcwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjE0IiBkPSJtOTYgMTY4LTM2LTY0aDIwbC0xMi0zMiIgLz48L2c+PC9zdmc+",
              "sizes": "192x192",
              "type": "image/svg+xml",
              "purpose": "any maskable"
            },
            {
              "src": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEyMWIyZCIgZD0iTTAgMGg1MTJ2NTEySDB6Ii8+PHBhdGggc3Ryb2tlPSIjZmZjNzAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMjQiIGQ9Im0zNTcuMzMzIDE2NS4zMzMgMzIgMzJNMzA5LjMzMyAyNTAuNjY3bDMxLjk5OSAzMk0yMTMuMzMzIDMyOCAzMiAzMiIvPjxwYXRoIHN0cm9rZT0iI2ZmYzcwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjMyIiBkPSJtMjU2IDQ0OC05Ni0xNzAuNjY3aDUzLjMzM0wyMjQgMTkyIiAvPjwvZz48L3N2Zz4=",
              "sizes": "512x512",
              "type": "image/svg+xml",
              "purpose": "any maskable"
            }
          ]
        };
        const manifestString = JSON.stringify(manifest);
        const manifestUrl = 'data:application/manifest+json;base64,' + btoa(unescape(encodeURIComponent(manifestString)));
        const manifestLink = document.createElement('link');
        manifestLink.rel = 'manifest';
        manifestLink.href = manifestUrl;
        document.head.appendChild(manifestLink);

        if ('serviceWorker' in navigator) {
          const swContent = `
            const CACHE_NAME = 'jazzlink-cache-v1';
            const urlsToCache = ['/', '/index.html'];
            self.addEventListener('install', event => {
              event.waitUntil(
                caches.open(CACHE_NAME).then(cache => {
                  return cache.addAll(urlsToCache);
                })
              );
            });
            self.addEventListener('fetch', event => {
              event.respondWith(
                caches.match(event.request).then(response => {
                  return response || fetch(event.request);
                })
              );
            });
          `;
          const swBlob = new Blob([swContent], { type: 'application/javascript' });
          const swUrl = URL.createObjectURL(swBlob);
          
          window.addEventListener('load', () => {
            navigator.serviceWorker.register(swUrl)
              .then(registration => console.log('ServiceWorker registration successful with scope: ', registration.scope))
              .catch(error => console.log('ServiceWorker registration failed: ', error));
          });
        }
    } catch (e) {
        console.error("PWA setup failed:", e);
    }
  </script>
</body>
</html>